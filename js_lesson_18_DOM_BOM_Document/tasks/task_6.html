<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link rel="stylesheet" href="../css/style.css" /> -->
    <title>Задача №6</title>
  </head>

  <body>
    <h2>
      Задача 6. Користувач задає кількість оцінок і натискає на кнопку «get table». В
      результаті формується таблиця з input, куди користувач вводить оцінки. Після цього
      натискає на кнопку “get sum” і знаходить середнє значення.
    </h2>

    <label
      >Введіть кількість оцінок
      <input class="scoreNum" type="text" value="" />
    </label>
    <div>
      <button class="get_table_button">Get table</button>
    </div>

    <script>
      function getInputTable() {
        const scores = parseInt(document.querySelector(".scoreNum").value)
        const table = document.createElement("table")
        table.style.border = "2px solid red"
        document.body.append(table)
        for (let i = 0; i < scores; i++) {
          const row = document.createElement("tr")
          table.prepend(row)
          const newInput = document.createElement("input")
          newInput.classList.add(`inp`)
          row.prepend(newInput)
        }
        const getSumButton = document.createElement("button")
        getSumButton.classList.add("get_sum_button")
        getSumButton.innerText = "Get sum"
        table.after(getSumButton)
        document.querySelector(".get_sum_button").onclick = getAvarage
      }

      function getAvarage() {
        let sum = 0
        const getInputs = document.querySelectorAll(".inp")
        for (const input of getInputs) {
          sum += parseInt(input.value)
        }
        const avarege = sum / getInputs.length
        const newDiv = document.createElement("div")
        newDiv.classList.add("result")
        document.body.append(newDiv)
        const newSpan = document.createElement("span")
        newSpan.innerText = `Average = ${avarege}`
        newDiv.append(newSpan)
      }

      window.onload = function () {
        document.querySelector(".get_table_button").onclick = getInputTable
      }
      //===========================================
    </script>
  </body>
</html>
